<html>
<head>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“ˆ</text></svg>">
<link href="${static_dir}/hover_index.css" rel="stylesheet" />
<link href="${static_dir}/main.css" rel="stylesheet" />

<script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" />

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
<link href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" rel="stylesheet" />

</head>

<body>

<div class="sidenav">
  <%
    ll_main = results[0]["sysinfo"]['main']
    ll_main_nospace = [item.replace(" ", "") for item in ll_main]
  %>
  % for idx, item in enumerate(ll_main):
  <label for=${'select'+str(ll_main_nospace[idx])} style="font-size: 120%; padding: 8px; color: white;">
     ${results[0]['sysinfo']['all_names'][idx]}
  </label>
  <select class="myselect" id=${'select'+str(ll_main_nospace[idx])} onchange="change(${ll_main_nospace})">
    <option value=""> Any </option>
    % for result in results:
    <%
      current_item = result['sysinfo']['main'][item]
    %>
      % if current_item != "":
      <%
        name = list(current_item.keys())[0]
      %>
        <option value="<b>${name}</b>: ${current_item[name]}"> ${current_item[name]} </option>
      % endif
    % endfor
  </select>
  % endfor
</div>

<div class="main">
<a id="top"></a>
<a href="${home}"><button class="btn"><i class="fa fa-home"></i></button></a>
<h1>
  BenchOpt benchmark results: ${benchmark}
  <a href="https://github.com/benchopt/${benchmark}">
    <i class="fab fa-github-square"></i>
  </a>
</h1>

<p><em>Last updated: ${last_updated.isoformat(sep=' ', timespec='minutes') | h}</em></p>
<h2>Summary</h2>
<p>
    <strong>${nb_total_benchs}</strong> benchmark results in total.
</p>

<table class="summary display" id="summary">
<thead>
  <tr>
    <th>Results</th>
    <th>Datasets</th>
    <th>System info</th>
    <th></th>
  </tr>
</thead>
<tbody>
% for result in results:
  <tr>
    <td class="fname">
      <a href="${result['page']}">
        ${result["fname_short"]}
      </a>
    </td>
    <td class="datasets">
      % for dataset in result['datasets']:
      <div class=dataset>
        ${dataset}
      </div>
      % endfor
    </td>
    <td class="sysinfo">
      % for all_info in result['sysinfo']['main'].values():
      <div class="all_info">
        % for idx in range(len(all_info)):
        <div class="info">
          <b>${list(all_info)[idx]}</b>: ${list(all_info.values())[idx]}
        </div>
        % endfor
      </div>
      % endfor

      <!-- platform is one result monitored everytime in new csv files -->

      % if result['sysinfo']['sub']['platform'] != '':
        <button onclick="displaymore(this,${loop.index})" id=${"btn_subinfo"+str(loop.index)} class="button buttoncent">
          <i class='fas fa-plus-circle'></i>
        </button>
        <div id=${"subinfo"+str(loop.index)} style="display:none;">
          % for all_info_sub in result['sysinfo']['sub'].values():
          <div class="all_info">
            % for idx in range(len(all_info_sub)):
            <div class="info">
              <b>${list(all_info_sub.keys())[idx]}</b>: ${list(all_info_sub.values())[idx]}
            </div>
            %endfor
          </div>
          %endfor
        </div>
      % endif
    </td>
    <td class="buttons">
      <a href="${result['page']}">
        <button class="btn"><i class="fas fa-chart-line"></i></button>
      </a>
      <a href="${result['fname']}">
        <button class="btn"><i class="fa fa-download"></i></button>
      </a>
    </td>
  </tr>
%endfor
</tbody>
</table>

<a class="backtotop" title="Back to top" href="#top"><i class="fas fa-level-up-alt"></i></a>

<script type="text/javascript">
$(document).ready(function() {
    $('.summary').DataTable();
} );

function change(ll_item){
  var td, i, fil;
  var filter = new Array;
  console.log(ll_item)
  for (item = 0; item < ll_item.length; item++){
    filter.push(document.getElementById("select"+ll_item[item]).value.toUpperCase());
  }
  var table = document.getElementById("summary");
  var tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    tr[i].style.display = "";
    td = tr[i].getElementsByTagName("td")[2];
    if (td){
     for (fil = 0; fil < filter.length; fil++){
       if (td.innerHTML.toUpperCase().indexOf(filter[fil]) > -1 && tr[i].style.display !== "none") {
         tr[i].style.display = "";
       }
       else {
         tr[i].style.display = "none";
       }
     }
    }
  }
}

function displaymore(id, loop_index) {
  var x = document.getElementById("subinfo"+loop_index);
  $(id).find('svg').toggleClass('fa-plus-circle fa-minus-circle');
  if (x.style.display === 'none') {
    x.style.display = "block";
  }
  else {
    x.style.display = "none";
  }
}
</script>
</div>
</body>
</html>