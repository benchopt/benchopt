<html>
<head>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“ˆ</text></svg>">
<link href="${static_dir}/main.css" rel="stylesheet" />

<script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" />

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
<link href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" rel="stylesheet" />

</head>

<body>

<div class="sidenav">

  <select id='selectcpu' onchange="change()">
    <option value=""> Any </option>
    % for result in results:
      % if result['sysinfo']['system-cpus'] != "":
        <option value="<b>cpu</b>: ${result['sysinfo']['system-cpus']['cpu']}"> ${result['sysinfo']['system-cpus']['cpu']} </option>
      % endif
    % endfor
  </select>

  <select id='selectram' onchange="change()">
    <option value=""> Any </option>
    % for result in results:
      % if result['sysinfo']['system-ram (GB)'] != "":
        <option value="<b>ram (GB)</b>: ${result['sysinfo']['system-ram (GB)']['ram (GB)']}"> ${result['sysinfo']['system-ram (GB)']['ram (GB)']} </option>
      % endif
    % endfor
  </select>

</div>

<div class="main">
<a id="top"></a>
<a href="${home}"><button class="btn"><i class="fa fa-home"></i></button></a>
<h1>
  BenchOpt benchmark results: ${benchmark}
  <a href="https://github.com/benchopt/${benchmark}">
    <i class="fab fa-github-square"></i>
  </a>
</h1>

<p><em>Last updated: ${last_updated.isoformat(sep=' ', timespec='minutes') | h}</em></p>
<h2>Summary</h2>
<p>
    <strong>${nb_total_benchs}</strong> benchmark results in total.
</p>




<table class="summary display" id="summary">
<thead>
  <tr>
    <th>Results</th>
    <th>Datasets</th>
    <th>System info</th>
    <th></th>
  </tr>
</thead>
<tbody>
% for result in results:
  <tr>
    <td class="fname">
      <a href="${result['page']}">
        ${result["fname_short"]}
      </a>
    </td>
    <td class="datasets">
      % for dataset in result['datasets']:
      <div class=dataset>
        ${dataset}
      </div>
      %endfor
    </td>
    <td class="sysinfo">
      % for all_info in result['sysinfo'].values():
      <div class="all_info">
        % for idx in range(len(all_info)):
        <div class="info">
          <b>${list(all_info)[idx]}</b>: ${list(all_info.values())[idx]}
        </div>
        %endfor
      </div>
      %endfor
    </td>
    <td class="buttons">
      <a href="${result['page']}">
        <button class="btn"><i class="fas fa-chart-line"></i></button>
      </a>
      <a href="${result['fname']}">
        <button class="btn"><i class="fa fa-download"></i></button>
      </a>
    </td>
  </tr>
%endfor
</tbody>
</table>

<a class="backtotop" title="Back to top" href="#top"><i class="fas fa-level-up-alt"></i></a>

<script type="text/javascript">
$(document).ready(function() {
    $('.summary').DataTable();
} );

function change(){
  var td, i, fil;

  var cpu = document.getElementById('selectcpu').value;
  var ram = document.getElementById('selectram').value;
  var filter = [cpu.toUpperCase(), ram.toUpperCase()];
  console.log(filter);
  var table = document.getElementById("summary");
  var tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    tr[i].style.display = "";
    td = tr[i].getElementsByTagName("td")[2];
    if (td){
     for (fil = 0; fil < filter.length; fil++){
       if (td.innerHTML.toUpperCase().indexOf(filter[fil]) > -1 && tr[i].style.display !== "none") {
         tr[i].style.display = "";
       }
       else {
         tr[i].style.display = "none";
       }
     }
    }
  }
}
</script>
</div>
</body>
</html>